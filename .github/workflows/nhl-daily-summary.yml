      - name: Check PT marker (skip if already posted)
        id: ptmarker
        shell: python
        run: |
          import os
          from datetime import datetime, timedelta
          from zoneinfo import ZoneInfo
          from pathlib import Path

          now_pt = datetime.now(ZoneInfo("America/Los_Angeles"))
          base = now_pt.date() if now_pt.hour >= 6 else (now_pt.date() - timedelta(days=1))
          pymd = base.strftime("%Y%m%d")
          print("ptymd:", pymd)

          marker = Path(f".posted/nhl-pt-{pymd}.done")
          os.makedirs(".posted", exist_ok=True)

          with open(os.environ["GITHUB_OUTPUT"], "a") as fh:
              fh.write(f"ptymd={pymd}\n")
              fh.write(f"skip={'true' if marker.exists() else 'false'}\n")
